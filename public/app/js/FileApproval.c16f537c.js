(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FileApproval"],{"94a8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MainLayout",[a("div",{staticClass:"container body_active file_approval"},[a("div",{staticClass:"row",class:e.window_desktop?"m_t_78":"m_t_16"},[a("div",{staticClass:"col-12 main_text",class:e.window_desktop?"title_desktop":"title_mobile"},[e._v(" File Approval ")])]),a("div",{staticClass:"row m_t_16"},[a("div",{staticClass:"col-12 col-lg-6 main_text text-start",class:e.window_desktop?"description_desktop":"description_mobile"},[e._v(" Please accept all files that are edited correctly. ")]),e.window_desktop?a("div",{staticClass:"col-12 col-lg-6 selected_text text-end",class:e.window_desktop?"description_desktop":"description_mobile"},[e._v(" "+e._s(e.checked_images.length)+" out of "+e._s(e.job&&e.job.images?e.job.images.length:0)+" pictures selected ")]):e._e()]),a("div",{staticClass:"row image_list m_t_55"},e._l(e.job.images,(function(t,i){return e.job.images.length?a("div",{key:"image-"+i,staticClass:"col-4 div_item text-center",class:t.approval?"approval_image":"",on:{click:function(a){return e.openImageApprovalModal(t)}}},[a("div",{staticClass:"image_item text-center",class:t.approval?"approval_image":""},[a("div",{staticClass:"img_div text-center"},[a("img",{attrs:{src:e.getWorkedImg(t),alt:"image-"+i}})]),!e.isCheckedImage(t.id)||t.approval?a("div",{staticClass:"div_svg"},[a("svg",{staticClass:"approval_svg",attrs:{width:"49",height:"49",viewBox:"0 0 49 49",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M49 24.5C49 30.9978 46.4188 37.2295 41.8241 41.8241C37.2295 46.4188 30.9978 49 24.5 49C18.0022 49 11.7705 46.4188 7.17588 41.8241C2.58124 37.2295 0 30.9978 0 24.5C0 18.0022 2.58124 11.7705 7.17588 7.17588C11.7705 2.58124 18.0022 0 24.5 0C30.9978 0 37.2295 2.58124 41.8241 7.17588C46.4188 11.7705 49 18.0022 49 24.5ZM36.8419 15.2206C36.6231 15.0026 36.3626 14.831 36.076 14.716C35.7894 14.601 35.4826 14.5449 35.1738 14.5512C34.865 14.5575 34.5607 14.626 34.279 14.7526C33.9973 14.8792 33.7441 15.0613 33.5344 15.288L22.8983 28.8396L16.4885 22.4267C16.0531 22.021 15.4772 21.8001 14.8821 21.8106C14.2871 21.8211 13.7194 22.0621 13.2985 22.483C12.8777 22.9038 12.6367 23.4715 12.6262 24.0666C12.6157 24.6616 12.8365 25.2375 13.2422 25.6729L21.3456 33.7794C21.5639 33.9973 21.8239 34.169 22.11 34.2842C22.3961 34.3995 22.7025 34.456 23.0108 34.4502C23.3192 34.4445 23.6233 34.3768 23.9049 34.251C24.1866 34.1252 24.44 33.944 24.6501 33.7181L36.8756 18.4363C37.2923 18.0029 37.5226 17.4234 37.5169 16.8222C37.5111 16.221 37.2699 15.646 36.8449 15.2206H36.8419Z",fill:"#D8C3AF"}})])]):e._e()])]):e._e()})),0),a("div",{staticClass:"row text-center m_t_130",class:e.window_desktop?"m_b_120":""},[a("div",{staticClass:"col-6 text-end"},[a("button",{staticClass:"custom_button decline_button main_text title_mobile white_background",attrs:{disabled:!e.checked_images.length},on:{click:e.openModalDecline}},[e._v(" Decline ")])]),a("div",{staticClass:"col-6 text-start"},[a("button",{staticClass:"custom_button main_text title_mobile braun_background white_text",class:e.window_desktop?"approval_button":"decline_button",attrs:{disabled:!e.checked_images.length},on:{click:function(t){return e.approvalImages()}}},[e._v(" Accept ")])])]),a("button",{staticClass:"btn btn-primary",attrs:{id:"decline-modal",type:"button","data-bs-toggle":"modal","data-bs-target":"#declineModal",hidden:""}},[e._v(" Launch decline modal ")]),a("div",{staticClass:"modal fade",attrs:{id:"declineModal",tabindex:"-1","aria-labelledby":"declineModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content white_background"},[a("div",{staticClass:"modal-header feedback_header"},[a("div",{staticClass:"row black_text title_feedback in_center text-center align-content-center"},[e._v(" Help the editor make your file/s better by providing feedback ")])]),a("div",{staticClass:"modal-body feedback_body"},[a("div",{staticClass:"row text-center align-content-center"},[a("div",{staticClass:"col-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.decline_message,expression:"decline_message"}],staticClass:"feedback_text_message",class:{"is-invalid":e.message_error},attrs:{required:"",id:"textMessage",autocapitalize:"sentences",placeholder:"Remove the background; resize the image..."},domProps:{value:e.decline_message},on:{click:e.dropErrorDeclineMessage,input:function(t){t.target.composing||(e.decline_message=t.target.value)}}}),a("div",{staticClass:"invalid-feedback",attrs:{id:"textMessageFeedback"}},[e._v(" Please leave a comment to help the editor to make your file/s better. ")])])]),a("div",{staticClass:"row align-content-center m_t_55"},[a("div",{class:e.window_desktop?"col-6 text-end":"col-12 text-center"},[a("button",{staticClass:"cancel_button white_background main_text custom_button keep_title",attrs:{"data-bs-dismiss":"modal"},on:{click:e.cancelDeclineModal}},[e._v(" Cancel ")])]),a("div",{class:e.window_desktop?"col-6 text-start":"col-12 text-center m_t_55 m_b_40"},[a("button",{staticClass:"send_button braun_background white_text custom_button keep_title",on:{click:e.declineImages}},[e._v(" Send ")]),a("button",{attrs:{id:"cancel-decline","data-bs-dismiss":"modal",hidden:""}})])])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"modalDecline2",tabindex:"-1","aria-labelledby":"declineModalLabel2","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content white_background"},[a("div",{staticClass:"modal-header feedback_header"},[a("div",{staticClass:"row black_text title_feedback in_center text-center align-content-center"},[e._v(" You already declined this file once. If you are still not satisfied with the editing, please leave a reaview about the editors so others will be aware of his/her skills. ")])]),a("div",{staticClass:"modal-body feedback_body"},[a("div",{staticClass:"box_text row text-center align-content-center"},[a("div",{staticClass:"col-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.decline_review,expression:"decline_review"}],staticClass:"feedback_text_message",class:{"is-invalid":e.message_error2},attrs:{id:"textMessage",autocapitalize:"sentences",placeholder:"Write a review about [the name of the editor here]..."},domProps:{value:e.decline_review},on:{click:e.dropErrorDeclineMessage,input:function(t){t.target.composing||(e.decline_review=t.target.value)}}}),e._v(" "),a("div",{staticClass:"invalid-feedback",attrs:{id:"textMessageFeedback2"}},[e._v(" Please leave a comment to help the editor to make your file/s better. ")])])]),a("div",{staticClass:"box_btn_md"},[a("div",[a("button",{staticClass:"cancel_button white_background main_text custom_button keep_title",attrs:{"data-bs-dismiss":"modal"},on:{click:e.cancelDeclineModal}},[e._v(" Cancel ")])]),a("div",[a("button",{staticClass:"cancel_button white_background main_text custom_button keep_title",attrs:{"data-bs-dismiss":"modal"},on:{click:function(t){return e.sendReviewAccept(!0)}}},[e._v(" Skip ")])]),a("div",[a("button",{staticClass:"send_button braun_background white_text custom_button keep_title",on:{click:function(t){return e.sendReviewAccept()}}},[e._v(" Send ")])])])])])])]),a("button",{staticClass:"btn btn-primary",attrs:{id:"approval-modal",type:"button","data-bs-toggle":"modal","data-bs-target":"#approvalModal",hidden:""}},[e._v(" Launch approval modal ")]),a("div",{staticClass:"modal fade",attrs:{id:"approvalModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:e.closeImageApprovalModal}})]),a("div",{staticClass:"modal-body"},[e.modal_image?a("div",{staticClass:"modal_image"},[a("carousel",{staticClass:"carousel_mob",attrs:{"per-page":1,"mouse-drag":!0,"touch-drag":!0}},e._l(e.getImages(e.modal_image),(function(e){return a("slide",[a("img",{attrs:{src:e,alt:""}})])})),1),a("div",{staticClass:"carousel_desc"},[a("div",{staticClass:"position-relative"},[a("div",{staticClass:"img_before"},[e._v("BEFORE")]),a("img",{attrs:{src:e.getImages(e.modal_image)[1],alt:""}})]),a("div",{staticClass:"position-relative"},[a("div",{staticClass:"img_after"},[e._v("AFTER")]),a("img",{attrs:{src:e.getImages(e.modal_image)[0],alt:""}})])]),a("button",{staticClass:"circle_check_point",on:{click:function(t){return e.toggleApproval(e.modal_image)}}},[e.isCheckedImage(e.modal_image.id)?a("svg",{attrs:{width:"49",height:"49",viewBox:"0 0 49 49",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{attrs:{cx:"18.5022",cy:"18.8208",r:"17.4768",fill:"white",stroke:"#AD967F"}})]):a("svg",{attrs:{width:"49",height:"49",viewBox:"0 0 49 49",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M49 24.5C49 30.9978 46.4188 37.2295 41.8241 41.8241C37.2295 46.4188 30.9978 49 24.5 49C18.0022 49 11.7705 46.4188 7.17588 41.8241C2.58124 37.2295 0 30.9978 0 24.5C0 18.0022 2.58124 11.7705 7.17588 7.17588C11.7705 2.58124 18.0022 0 24.5 0C30.9978 0 37.2295 2.58124 41.8241 7.17588C46.4188 11.7705 49 18.0022 49 24.5ZM36.8419 15.2206C36.6231 15.0026 36.3626 14.831 36.076 14.716C35.7894 14.601 35.4826 14.5449 35.1738 14.5512C34.865 14.5575 34.5607 14.626 34.279 14.7526C33.9973 14.8792 33.7441 15.0613 33.5344 15.288L22.8983 28.8396L16.4885 22.4267C16.0531 22.021 15.4772 21.8001 14.8821 21.8106C14.2871 21.8211 13.7194 22.0621 13.2985 22.483C12.8777 22.9038 12.6367 23.4715 12.6262 24.0666C12.6157 24.6616 12.8365 25.2375 13.2422 25.6729L21.3456 33.7794C21.5639 33.9973 21.8239 34.169 22.11 34.2842C22.3961 34.3995 22.7025 34.456 23.0108 34.4502C23.3192 34.4445 23.6233 34.3768 23.9049 34.251C24.1866 34.1252 24.44 33.944 24.6501 33.7181L36.8756 18.4363C37.2923 18.0029 37.5226 17.4234 37.5169 16.8222C37.5111 16.221 37.2699 15.646 36.8449 15.2206H36.8419Z",fill:"#D8C3AF"}})])])],1):e._e()])])])]),a("button",{staticClass:"btn btn-primary",attrs:{id:"accept-modal",type:"button","data-bs-toggle":"modal","data-bs-target":"#acceptModal",hidden:""}},[e._v(" Launch approval modal ")]),a("div",{staticClass:"modal fade",attrs:{id:"acceptModal",tabindex:"-1","aria-labelledby":"acceptModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content white_background"},[a("div",{staticClass:"modal-header feedback_header"},[a("div",{staticClass:"row black_text title_feedback in_center text-center align-content-center"},[e._v(" Thank you for you feedback! ")])]),a("div",{staticClass:"modal-body feedback_body"},[a("div",{staticClass:"row black_text in_center message_feedback message_feedback_block text-center align-content-center"},[e._v(" The editor will resubmit the file/s ASAP. ")]),a("div",{staticClass:"box-btn row in_center align-content-center"},[a("button",{staticClass:"btn_custom1 keep_approving_button braun_background white_text custom_button keep_title",attrs:{"data-bs-dismiss":"modal"},on:{click:function(t){return e.approvalImages()}}},[e._v(" Keep Approving Files ")])])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"acceptModalReview",tabindex:"-1","aria-labelledby":"acceptModalLabel2","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content white_background"},[a("div",{staticClass:"modal-header feedback_header"},[a("div",{staticClass:"row black_text title_feedback in_center text-center align-content-center"},[e._v(" Thank you for you feedback! ")])]),a("div",{staticClass:"modal-body feedback_body"},[a("div",{staticClass:"box-btn row in_center align-content-center"},[a("button",{staticClass:"btn_custom1 keep_approving_button braun_background white_text custom_button keep_title",attrs:{"data-bs-dismiss":"modal"},on:{click:e.closeModelReview}},[e._v(" Keep Approving Files ")])])])])])])])])},s=[],n=a("5530"),o=a("1da1"),l=(a("caad"),a("2532"),a("4de4"),a("d3b7"),a("d81d"),a("b64b"),a("99af"),a("96cf"),a("2f62")),c=a("713b"),d=a("3703"),r=a("09f9"),u=a("7b17"),m=a("0a63"),v={name:"FileApproval",components:{MainLayout:c["a"],Carousel:m["Carousel"],Slide:m["Slide"]},props:[],data:function(){return{sizeW:null,window_desktop:!0,image_item_width:null,image_item_height:null,approval_svg_height:null,svg_padding_top:null,confirm_user_type:d["a"].BUSINESS,decline_message:null,job:{},selected:0,message_error:!1,message_error2:!1,modal_image:null,modalDecline2:null,checked_images:[],decline_review:null,acceptModalReview:null,images:[]}},created:function(){window.addEventListener("resize",this.updateWidth),this.updateWidth(),window.addEventListener("resize",this.updateImageItemWidth),window.addEventListener("resize",this.updateApprovalSvg)},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.testUser();case 2:return t.next=4,e.getJobs();case 4:e.updateImageItemWidth(),e.modalDecline2=new u["a"](document.getElementById("modalDecline2")),e.acceptModalReview=new u["a"](document.getElementById("acceptModalReview")),a=document.getElementById("approvalModal"),a.addEventListener("shown.bs.modal",(function(){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),0)}));case 9:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){window.removeEventListener("resize",this.updateWidth),window.removeEventListener("resize",this.updateImageItemWidth),window.removeEventListener("resize",this.updateApprovalSvg),this.modalDecline2&&(this.modalDecline2=null),this.acceptModalReview&&(this.acceptModalReview=null)},methods:Object(n["a"])(Object(n["a"])({},Object(l["c"])(["showLoader","hideLoader"])),{},{getWorkedImg:function(e){var t;return(null===e||void 0===e||null===(t=e.worked_img)||void 0===t?void 0:t.image_url)||e.src},getImages:function(e){var t,a,i=[];null!==e&&void 0!==e&&null!==(t=e.worked_img)&&void 0!==t&&t.image_url&&i.push((null===e||void 0===e||null===(a=e.worked_img)||void 0===a?void 0:a.image_url)||null);return i.push(e.src),i},closeModelReview:function(){this.acceptModalReview.hide()},sendReviewAccept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.approvalImages():this.decline_review?(this.approvalImages(this.decline_review),this.modalDecline2.hide()):this.message_error2=!0},isCheckedImage:function(e){return!this.checked_images.includes(e)},updateWidth:function(){this.sizeW=document.documentElement.clientWidth},updateImageItemWidth:function(){this.image_item_width=document.querySelector(".image_item").offsetWidth},updateApprovalSvg:function(){},goHome:function(){this.$router.push({to:"/login",name:"Login"})},testUser:function(){this.user=JSON.parse(localStorage.getItem("strobeart_user")),this.user&&this.user.type_user===this.confirm_user_type||this.goHome()},openImageApprovalModal:function(e){this.modal_image=e,document.getElementById("approval-modal").click()},cleanModalImage:function(){this.modal_image=null},toggleApproval:function(e){this.images=e,this.checked_images.includes(e.id)?this.checked_images=this.checked_images.filter((function(t){return t!==e.id})):this.checked_images.push(e.id)},closeImageApprovalModal:function(){this.cleanModalImage()},openAcceptModal:function(){document.getElementById("accept-modal").click()},openModalDecline:function(){var e=this.isDeclineImage();if(e.length){var t=this.checked_images.filter((function(t){return!e.includes(t)}));if(!t.length)return void this.modalDecline2.show();this.checked_images=this.checked_images.filter((function(t){return!e.includes(t)}))}document.getElementById("decline-modal").click()},cancelDeclineModal:function(){this.decline_message=null,this.modalDecline2.hide(),this.decline_review=null},updateSelected:function(){},dropErrorDeclineMessage:function(){this.message_error=!1,this.message_error2=!1},isDeclineImage:function(){var e,t=[],a=(null===(e=this.job)||void 0===e?void 0:e.images)||{};return Object.keys(a).map((function(e,i){2==a[e]["decline"]&&t.push(a[e]["id"])})),t},declineImages:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.decline_message){t.next=3;break}return e.message_error=!0,t.abrupt("return");case 3:return document.getElementById("cancel-decline").click(),t.prev=4,e.showLoader(),t.next=8,e.$http.postAuth("".concat(e.$http.apiUrl(),"decline-image"),{job_id:e.job.id,message:e.decline_message,checked_images:e.checked_images});case 8:e.decline_message=null,e.checked_images=[],e.goHome(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](4),n=(null===t.t0||void 0===t.t0||null===(a=t.t0.response)||void 0===a||null===(i=a.data)||void 0===i||null===(s=i.error)||void 0===s?void 0:s.message)||"ERROR",Object(r["a"])(n);case 17:e.hideLoader();case 18:case"end":return t.stop()}}),t,null,[[4,13]])})))()},approvalImages:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,l,c,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:null,t.showLoader(),a.prev=2,a.next=5,t.$http.postAuth("".concat(t.$http.apiUrl(),"approval-image"),{job_id:t.job.id,checked_images:t.checked_images,review:i});case 5:return o=a.sent,"FINISHED"==(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.status)&&t.goHome(),t.checked_images=[],a.next=10,t.getJobs();case 10:a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](2),u=(null===a.t0||void 0===a.t0||null===(l=a.t0.response)||void 0===l||null===(c=l.data)||void 0===c||null===(d=c.error)||void 0===d?void 0:d.message)||"ERROR",Object(r["a"])(u);case 16:t.hideLoader(),i&&(t.acceptModalReview.show(),t.decline_message=null);case 18:case"end":return a.stop()}}),a,null,[[2,12]])})))()},checkResult:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==e&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&i.success){a.next=3;break}return t.hideLoader(),a.abrupt("return",Object(r["a"])("OOPS... Something went wrong..."));case 3:t.job=(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.job)||{},t.updateSelected(),t.hideLoader();case 6:case"end":return a.stop()}}),a)})))()},saveResult:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.postAuth("".concat(e.$http.apiUrl(),"approval-or-decline"),{job:e.job,message:e.decline_message,filtered:!0});case 2:return a=t.sent,t.next=5,e.checkResult(a);case 5:case"end":return t.stop()}}),t)})))()},getJobs:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showLoader(),e.$route.params.id){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$http.getAuth("".concat(e.$http.apiUrl(),"get-job/").concat(e.$route.params.id,"?filtered=true"));case 5:return a=t.sent,t.next=8,e.checkResult(a);case 8:case"end":return t.stop()}}),t)})))()}}),computed:Object(n["a"])({},Object(l["b"])(["getUser"])),watch:{sizeW:function(e){this.window_desktop=e>992},image_item_width:function(e){e&&0!==e&&(this.image_item_height=Math.ceil(e/1.04),this.svg_padding_top=Math.ceil(this.image_item_height-(this.approval_svg_height+16)))}}},_=v,g=(a("ea55"),a("ea0b"),a("2877")),p=Object(g["a"])(_,i,s,!1,null,"5cd8450e",null);t["default"]=p.exports},a6a9:function(e,t,a){},b854:function(e,t,a){},ea0b:function(e,t,a){"use strict";a("a6a9")},ea55:function(e,t,a){"use strict";a("b854")}}]);
//# sourceMappingURL=FileApproval.c16f537c.js.map